#!/bin/sh
PATH=/bin:/usr/bin
DIR=${1:-~/Maildir}

for d in "${DIR}"/*; do
    [ "${d}" = "${DIR}/cur" ]       && continue
    [ "${d}" = "${DIR}/new" ]       && continue
    [ "${d}" = "${DIR}/tmp" ]       && continue
    [ "${d}" = "${DIR}" ]           && continue
    [ "${d}" = "${DIR}/archives" ]  && continue
    [ "${d}" = "${DIR}/drafts" ]    && continue
    [ "${d}" = "${DIR}/junk" ]      && continue
    [ "${d}" = "${DIR}/sent" ]      && continue
    [ "${d}" = "${DIR}/templates" ] && continue
    [ "${d}" = "${DIR}/trash" ]     && continue

    [ $(find "${d}" -type f | wc -l) -eq 0 ] &&
        rmdir -v "${d}"/cur "${d}"/new "${d}"/tmp "${d}"
done

exit 0
# vim: filetype=sh textwidth=80
